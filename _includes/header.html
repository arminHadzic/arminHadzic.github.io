<header class="site-header">
  <div class="wrapper">
    <a class="site-title" rel="author" href="{{ '/' | relative_url }}">
      {{ site.title | escape }}
    </a>

    <nav class="site-nav" style="display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between;">
      <div class="nav-links" style="display: flex; gap: 1rem; flex-wrap: wrap;">
        {% include nav-items.html paths=site.header_pages %}
      </div>

      <!-- Dark Mode Toggle Button -->
      <div id="dark-mode-toggle-container" style="margin-left: auto; padding-left: 1rem;">
        {% include dark-mode-toggle.html %}
      </div>
    </nav>
  </div>

  <!-- Dark Mode Script -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      console.log("Dark mode script loaded!");

      const toggle = document.getElementById("darkModeToggle");
      if (!toggle) {
        console.error("Dark mode toggle NOT found");
        return;
      }

      const isDark = localStorage.getItem("theme") === "dark";

      if (isDark) {
        document.documentElement.classList.add("dark");
        toggle.checked = true;
      }

      toggle.addEventListener("change", function () {
        const isDark = toggle.checked;
        document.documentElement.classList.toggle("dark", isDark);
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });
    });
  </script>
</header>
